{% extends 'blog/base.html' %}
{% block content %}
<h1 class="mb-3">
  {% if post %}Edit Post{% else %}New Post{% endif %}
</h1>

<!-- IMPORTANT: enctype added -->
<form method="post" enctype="multipart/form-data" novalidate>
  {% csrf_token %}

  <div class="mb-3">
    <label class="form-label" for="{{ form.title.id_for_label }}">Title</label>
    {{ form.title }}
    <div id="titleHelp" class="form-text">{{ form.title.help_text }}</div>
    {% for e in form.title.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
  </div>

  <div class="mb-3">
    <label class="form-label" for="{{ form.body.id_for_label }}">Body</label>
    {{ form.body }}
    {% for e in form.body.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
  </div>

  <div class="mb-3">
    <label class="form-label" for="{{ form.category.id_for_label }}">Category</label>
    {{ form.category }}
    {% for e in form.category.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
  </div>

  <div class="mb-3">
    <label class="form-label" for="{{ form.tags.id_for_label }}">Tags</label>
    {{ form.tags }}
    {% for e in form.tags.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
  </div>

  <!-- NEW: Image Upload -->
  <div class="mb-3">
    <label class="form-label" for="{{ form.image.id_for_label }}">Image</label>
    {{ form.image }}
    {% for e in form.image.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
  </div>

  <!-- Optional: Show existing image when editing -->
  {% if post and post.image %}
    <div class="mb-3">
      <p>Current Image:</p>
      <img src="{{ post.image.url }}" alt="{{ post.title }}" style="max-width:200px; height:auto;">
    </div>
  {% endif %}

  <button class="btn btn-primary">Save</button>
  <a class="btn btn-secondary" href="{% url 'blog:post_list' %}">Cancel</a>
</form>
{% endblock %}



